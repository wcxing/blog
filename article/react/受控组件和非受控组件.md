## 受控组件和非受控组件

#### 1. 背景

受控组件和非受控组件都可以用来实现表单相关的需求。

React组件可以控制一个表单元素的状态（通过表单元素的value属性），React组件还可以通过这个表单元素的状态更改回调来获取这个表单元素的状态。这个表单元素就是一个“受控组件”。

“受控”体现在：React组件可以通过自己的state控制这个表单元素的值（value属性）

【思考】只要是这种形式的父子组件关系，都可以成为受控组件。不限于表单元素。那么如何实现一个受控组件？

#### 2. 受控组件和非受控组件

受控组件和非受控组件都可以用来实现表单功能。非受控组件通过ref来直接获取表单的状态（也可以通过回调）。在某些需求中，React组件不需要控制非受控组件的状态。

注意，type为"file"的input组件无法受控，因为它的状态不能被代码赋值，只能是用户输入。

受控组件和非受控组件有什么区别呢？什么场景下该用受控组件，什么场景下该用非受控组件呢？

受控组件和非受控组件的优缺点

- 受控组件的优点是，React组件可以将表单状态记录在state中，随时使用。
- 非受控组件的优点是，更简洁。

使用受控组件还是非受控组件的依据是，是否需要记录表单组件的状态。

- 如果表单需求很简单，不需要存储表单状态，只需要某个条件触发拿到表单的状态。那么应该使用非受控组件，这样代码会更简单。
- 如果有需要将表单的数据存储，比如，输入时候实时校验输入并给出反馈；强制输入的值转换（如都改为大写）；输入的数据要用来渲染其他元素（比如空值时候button置灰等）。这时候应该用受控组件。