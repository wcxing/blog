## React 开发最佳实践

#### 1. 开发步骤

1. 首先分析需求，确定项目类型
	1. 单页应用/多页应用
	2. 后台/C端
	3. SEO
2. 整体架构
	1. 技术选型
		1. 脚手架
		2. css: css in js、css modules
		3. 状态管理
		4. 路由
		5. 组件库
		6. SSR
	2. 代码组织结构
		
		**按feature管理（包括状态管理也按照feature管理）**
	3. 状态设计
				
		**状态管理的场景（何时需要状态管理）**
		
		1. 组件间需要共享状态
		2. 状态需要持久化
		
		状态如何设计
		
		**按照状态机的思路，找出应用有多少种状态，状态之间如何转换**
		
		**尽量使用不可变数据**
3. 组件设计

	**确定组件类型**
	
		按照通用性分类
			1. 通用组件
			2. 定制组件
		按照组件内容分类
			1. UI组件
			2. 业务组件

	**React组件设计步骤**

		1. 静态UI
		2. 增加状态
		3. 增加交互
	
	**class component 生命周期钩子的使用**
	
		分为状态转换和副作用，尽量遵循新生命周期钩子的实践

		使用hook代替class component
		
		static getDerivedStateFromProps()方法尽量只在获取表单元素数据或者类似场景下使用，其他情况不推荐使用
	
	React组件设计原则
		
		1. 单一职责，组件粒度足够小，增加复用性和可维护性
		2. 能计算得到的状态就不要存储
		3. 状态扁平存储
		4. **组件和模块API设计，精简原则**
		5. **应该使用函数式组件还是class 组件**
			尽量使用无状态组件
		6. **是否应该使用ref获取子组件实例引用**
			有几种情况需要用到ref
			
			1. 操作原生DOM
			2. 子组件有副作用的操作，比如调用底层异步接口
		
			其他情况应该尽量不使用ref
	